*JV-1*

# Java 选择器

选取、查看或安装 Java 运行时。

## 概述

![.](https://img.gejiba.com/images/93855bbd915a1a3f55006e4fc25f849d.png)

Java 选择器允许你选择默认 Java，或重新扫描 Java，或安装新的 Java 版本。

## 范例

### 扫描 Java

通常当第一次使用 Alicorn 时，若计算机上没有 Java，Alicorn 总是会尝试安装 Java，因此通常情况下计算机上总是有可用的 Java 运行时。

通常情况下，若计算机上已有 Java，Alicorn 会尝试连接已有的 Java 而不是安装新的，但如果在这之后你又安装了新的 Java，Alicorn 不会自动找到它，这时可以使用「重新扫描」功能。

只需单击「刷新」按钮（位于「手动选择」按钮右侧），不定长进度条将出现表示正在搜索，稍后即会结束，同时 Java 列表将被更新。

---

### 手动定位 Java

如果 Java 安装在不常见的目录（如 `/home/rarity/aaa/bbb/ccc/ddd/eee/java`），则 Alicorn 可能找不到它，使用此功能可手动定位。

1. 单击「让我手动选择一个 Java 运行时」。

2. 在弹出窗口中导航，选择 `java`、`java.exe` 或者 `javaw.exe`，确保所选择的是**可执行文件**格式而不是目录。（例如，当你看见 `jdk-17.0.1+12` 时，应当**继续深入**并选取 `bin/java.exe` 而不是停留在那个文件夹上）

3. 所选的 Java 会被添加到 Java 列表。

---

### 选取默认 Java

尽管现在 Alicorn 会尝试自动选取 Java，但这里可以设置默认用于启动 Java，如果 Alicorn 找不到一个合适的 Java，她会使用这里所指定的。

单击下拉选择框即可选取默认 Java。

由于这一功能已经极少用到，因此也可以将其用于查看 Java 信息：**Java 语言版本（大版本）**、**JRE 实现版本**和**虚拟机版本**将显示在下方。

---

### 浏览所有 Java

单击下拉选择框，下拉项即为所有检测到的 Java。

![.](https://img.gejiba.com/images/e6698325992980616cbf0201b7aea62d.png)

---

### 安装 Java

尽管通常没有理由这样做 —— Alicorn 总会试图找到一个合适的 Java 版本。但如果你同时在游玩 1.17 及以上的版本和 1.12 及以下的版本，或者在使用某些版本的 Forge，那么你很可能没有安装正确的 Java 版本。

详细的原因将在本范例结束后叙述。

使用 Alicorn 不需要考虑这些，只需要按下「快速安装 Java 并自动设置」，Alicorn 就会在数据目录下安装两个合适的 Java 版本：一个是 Java 8，用于低版本 Minecraft 和 Forge；一个是 Java 16，用于高版本 Minecraft。这需要一点时间，当按钮重新亮起时，安装就已经完成。

整个安装过程是静默而且全自动的，不会有任何提示。

!> **以下内容需要专业知识**  
普通用户可直接跳转到「描述」部分。

请看以下兼容性表：

| Minecraft 版本    | Forge | 所需 Java 版本 |
| --------------- | ----- | ---------- |
| <= 1.6.x        | 无所谓   | 8 或以下      |
| 1.7.x - 1.12.x  | 无所谓   | 只能是 8      |
| 1.13.x - 1.16.x | 无     | 8 或以上      |
| 1.13.x - 1.16.x | 有     | 只能是 8      |
| 1.17.x          | 无所谓   | 16 或以上     |
| 1.18.x          | 无所谓   | 17 或以上     |

如你所见，如果仅游玩 Minecraft 原版（1.13 及以上），只使用一个 Java 是有可能的，但是**如果使用 Forge，只使用一个 Java 游玩所有「现代」版本 Minecraft 是*几乎*不可能的**。尝试使用旧版本 Java 启动不兼容的 Minecraft *几乎必然*（概率论中的定义）会引发崩溃。

因此，至少需要两个 Java（8 和 17）才能畅玩所有版本的 Minecraft。

## 描述

此页面具有如下功能：

- **浏览 Java**：已添加的 Java 将显示在下拉选择框的选择区。显示的是标准 JRE/JDK 目录结构中的根目录，可执行文件应当位于其下的 `bin/` 中。

- **显示 Java 信息**：页面中部总会显示所选 Java 的信息，包括：
  
  - **Java 语言版本**：即 Java 语言标准版本，例如 Java 16 的语言版本即为 16（字节码版本 60.0）。
  
  - **Java 运行时版本和 Java 虚拟机版本**：由 Java 运行时提供，Alicorn 原样输出，等同于在 Shell 中执行 `java -version` 输出的后两行。

- **选取默认 Java**：尽管现在已经不具有实际意义（除非你使用修改后的 Java 版本，其版本号输出不规范导致自动选择失效，否则启动*几乎必然*会失败），但你依然可以使用该选项选取默认 Java。
  
  当 Alicorn 不能自动选择时，将使用此 Java 来启动游戏。

- **安装 Java**：用于安装 Java 运行时。Alicorn 会从 AdoptOpenJDK 的 TUNA 镜像下载携带版的归档并将其置于数据目录下，随后清除 Java 列表，并将新下载的 Java 添加到其中。安装的两个 Java 运行时总会有一个是 Java 8，另一个是足以运行最新 Minecraft 版本的更高版本 Java。

## 注意事项

- **Alicorn 仅识别部分目录下的 Java**，这意味着如果你将 Java 安装在**以下目录之外**（子文件夹属于此目录）的位置，Alicorn 将无法搜索到它（仅能通过手动定位添加）：
  
  - `/usr/`
  
  - `C:\Program Files\`
  
  - `C:\Program Files (x86)\`
  
  - `PATH` 环境变量所指定的目录
  
  - `which` 或 `where` 命令可查找到的目录

- **Java 版本识别并非 100% 准确**，如果你使用的是一个修改后的 Java 版本（尽管我们现在还没有发现这样的例子），那么其版本将可能无法被识别。如果你遇到了「Java 0」或者一直处于读取状态，则代表此 Java 运行时不可识别。

## 参见

- [DTS-1 Alicorn 目录结构](/DTS-1.md)

- [LC-1 启动](/LC-1.md)

- [几乎必然](https://zh.wikipedia.org/wiki/%E5%87%A0%E4%B9%8E%E5%BF%85%E7%84%B6) - Wikipedia

## 跋

ThatRarityEG 编写于 2022/02/09
